(this.webpackJsonpspeedtest=this.webpackJsonpspeedtest||[]).push([[0],{33:function(e){e.exports=JSON.parse('{"apiKey":"AIzaSyAIt2HavjTMR_X6ND-isMT_qkStzELd3mw","authDomain":"speedgame-3e588.firebaseapp.com","projectId":"speedgame-3e588","storageBucket":"speedgame-3e588.appspot.com","messagingSenderId":"953754968497","appId":"1:953754968497:web:6492fabb3604f756949d90"}')},38:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var s=n(14),c=n.n(s),a=n(31),r=n.n(a),o=(n(38),n(0)),i=n.n(o),l=n(29),u=n(3),d=n(1),j=n(2),h=n(6),b=n(7),m=n(5),O=function(e){var t=e.handler,n=e.score,s=(e.results,e.submit),c=e.name,a=e.change;return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"overlay"}),Object(m.jsxs)("div",{className:"game-over",children:[Object(m.jsx)("h2",{children:"GAME OVER"}),Object(m.jsxs)("p",{children:["Your score was: ",n]}),Object(m.jsxs)("form",{onSubmit:s,children:[Object(m.jsx)("label",{htmlFor:"name",children:"Your nickname "}),Object(m.jsx)("input",{type:"text",id:"name",name:"name",onChange:a,value:c}),Object(m.jsx)("input",{type:"submit",value:"save"})]}),Object(m.jsx)("button",{className:"continue",onClick:t,children:"CONTINUE"})]})]})},p=function(e){var t=e.handler,n=e.active,s=e.btn,c="speed-button "+(n[s]?"glow":"");return console.log("button: "+s+", style: "+c),Object(m.jsx)("button",{className:c,onClick:function(){return t(s)}})},v=function(e){var t=e.handler,n=e.active;return Object(m.jsxs)("div",{className:"speed-buttons",children:[Object(m.jsx)(p,{handler:t,active:n,btn:0}),Object(m.jsx)(p,{handler:t,active:n,btn:1}),Object(m.jsx)(p,{handler:t,active:n,btn:2}),Object(m.jsx)(p,{handler:t,active:n,btn:3})]})},x=function(e){var t=e.handler,n=e.btnType,s="control "+n,c=n.toUpperCase();return Object(m.jsx)("button",{className:s,onClick:t,children:c})},f=function(e){var t=e.startHandler,n=e.stopHandler;return Object(m.jsxs)("div",{className:"controls",children:[Object(m.jsx)(x,{handler:t,btnType:"start"}),Object(m.jsx)(x,{handler:n,btnType:"stop"})]})},g=function(e){var t=e.handler,n=e.score,s=e.results;return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"overlay"}),Object(m.jsxs)("div",{className:"game-over",children:[Object(m.jsx)("h2",{children:"BEST SCORES"}),Object(m.jsxs)("p",{children:["Your score was: ",n]}),Object(m.jsxs)("table",{children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Player"}),Object(m.jsx)("th",{children:"Score"})]})}),Object(m.jsx)("tbody",{children:s.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:e.name}),Object(m.jsx)("td",{children:e.score})]},e.id)}))})]}),Object(m.jsx)("button",{className:"continue",onClick:t,children:"CONTINUE"})]})]})},k=n(32),w=n(24),S=n(33),y=Object(k.a)(S),D=Object(w.e)(y),N=n(23),T=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(d.a)(this,n);for(var s=arguments.length,c=new Array(s),a=0;a<s;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={running:!1,clickcount:0,moves:[],active:[!1,!1,!1,!1],showPopUp:!1,results:[],name:""},e.clickID=null,e.resultsCollectionRef=Object(N.c)(D,"results"),e.gameOver=function(){e.clickID&&clearTimeout(e.clickID),e.setState({running:!1,showPopUp:"showGameOver"})},e.resetGame=function(){e.clickID&&clearTimeout(e.clickID),e.setState({running:!1,clickcount:0,moves:[],showPopUp:!1})},e.setActive=function(t,n){var s=e.state.active.slice();return s[t]=n,s},e.run=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.state.running){var s;do{s=Math.floor(4*Math.random())}while(s===n);e.setState({moves:e.state.moves.concat([s]),active:e.setActive(s,!0)}),console.log(s),console.log(e.state),t*=.9,setTimeout((function(){return e.setState({active:e.setActive(s,!1)})}),1.8*t),setTimeout((function(){e.run(t,s)}),1e3)}},e.startHandler=function(){e.state.running||(e.setState({running:!0}),e.clickID=setTimeout((function(){e.gameOver()}),4e3),setTimeout((function(){e.run(1e3)}),1e3))},e.stopHandler=function(){e.resetGame()},e.clickHandler=function(t){if(e.state.running){var n=e.state.clickcount;e.state.moves[n]===t?(clearTimeout(e.clickID),e.clickID=setTimeout((function(){e.gameOver()}),4e3),e.setState({clickcount:n+1})):e.gameOver()}},e.continueBtnHandler=function(){"showGameOver"!==e.state.showPopUp?e.resetGame():e.setState({showPopUp:"showStats"})},e.getResultsFromDB=Object(u.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(N.d)(e.resultsCollectionRef);case 2:n=t.sent,e.setState({results:n.docs.map((function(e){return Object(l.a)(Object(l.a)({},e.data()),{},{id:e.id})}))});case 4:case"end":return t.stop()}}),t)}))),e.addResultToDB=Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(N.b)(e.resultsCollectionRef,{name:e.state.name,score:10*e.state.clickcount,date:N.a.fromDate(new Date)});case 2:e.getResultsFromDB();case 3:case"end":return t.stop()}}),t)}))),e.onSubmitHandler=function(t){t.preventDefault(),e.addResultToDB(),e.resetGame()},e.onChange=function(t){return e.setState({name:t.target.value})},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.getResultsFromDB()}},{key:"render",value:function(){var e=10*this.state.clickcount;return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("h1",{children:"Speed Game"}),Object(m.jsxs)("h2",{children:["Your score is: ",e]}),Object(m.jsx)(v,{handler:this.clickHandler,active:this.state.active}),Object(m.jsx)(f,{startHandler:this.startHandler,stopHandler:this.stopHandler}),this.state.showPopUp&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"overlay1"}),Object(m.jsx)("div",{className:"overlay2"})]}),"showGameOver"===this.state.showPopUp&&Object(m.jsx)(O,{handler:this.continueBtnHandler,score:e,results:this.state.results,submit:this.onSubmitHandler,name:this.state.name,change:this.onChange}),"showStats"===this.state.showPopUp&&Object(m.jsx)(g,{handler:this.continueBtnHandler,score:e,results:this.state.results})]})}}]),n}(s.Component),H=T;r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(H,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.983f5c2d.chunk.js.map